---
title: "Как включить директиву Sendfile в Nginx"
date: 2024-04-18
description: "Директива Sendfile в NGINX — это мощная функция, которая значительно повышает производительность сервера, обеспечивая эффективную обработку данных, снижая нагрузку на сервер и поддерживая масштабируемые конфигурации. Используя эту директиву, NGINX может напрямую передавать данные из файловой системы в сетевой сокет, минуя пространство пользователя и минимизируя использование ЦП. Это приводит к более быстрой доставке файлов и повышению общей производительности, что делает ее важной оптимизацией для веб-сайтов и приложений с высоким трафиком."
tags: ["NGINX", "Linux"]
type: post
weight: 20
showTableOfContents: true
---
## Включить директиву Sendfile в Nginx
### Проверка поддержки ядра для Sendfile
Перед реализацией директивы Nginx Sendfile важно убедиться, что ядро ​​вашей системы поддерживает системный вызов sendfile. Хотя эта функция широко доступна, проверка является хорошей практикой.

Выполните следующую команду для проверки поддержки sendfile:
```
grep SENDFILE /boot/config-$(uname -r)
```
Положительное подтверждение выглядит так:
```
CONFIG_SENDFILE=y
```
### Активация Sendfile в NGINX
Чтобы включить функцию Sendfile, откройте файл конфигурации NGINX. Обычно этот файл находится по адресу `/etc/nginx/nginx.conf`.

Для этой цели используйте текстовый редактор командной строки, например Nano или Vim:
```
sudo nano /etc/nginx/nginx.conf
```
В блоке HTTP этого файла найдите директиву sendfile. Если ее нет, добавьте следующую строку:
```
http {
    sendfile on;
    ...
}
```
Если sendfileустановлено значение off (sendfile off;), измените его на onили, если оно отсутствует, просто добавьте строку.
### Перезапуск NGINX для применения изменений
После настройки важно проверить конфигурацию NGINX на наличие ошибок. Используйте эту команду для проверки конфигурации:
```
sudo nginx -t
```
Ожидаемый результат должен подтвердить успешную проверку:
```
nginx: configuration file /etc/nginx/nginx.conf test is successful
```
Чтобы применить изменения, перезапустите сервер NGINX. В зависимости от вашей системы используйте одну из следующих команд:
```
sudo systemctl restart nginx
```
или
```
sudo service nginx restart
```
Вот так!